(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a47b01d6"],{"2beb":function(e,t,s){},"2f8f":function(e,t,s){"use strict";var n=s("2beb"),a=s.n(n);a.a},"44ba":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-content"},[s("div",{staticClass:"panel"},[s("div",{staticClass:"panel-body",class:e.classes,staticStyle:{height:"80vh",display:"flex","flex-direction":"row"}},[s("el-main",{staticStyle:{padding:"0"}},[s("el-container",{staticClass:"is-vertical",staticStyle:{height:"100%"}},[s("div",{staticClass:"chat-header"},[s("h1",[e._v(e._s(e.school.manager.name))])]),s("el-main",{staticStyle:{flex:"1","flex-basis":"auto",overflow:"hidden","box-sizing":"border-box",display:"block",margin:"0 20px",padding:"0"}},[s("div",{staticClass:"messages-container"},e._l(e.messages,(function(t){return s("div",{key:t.id},[s("div",{class:t.from===e.profile.id?"im-message-text right":"im-message-text left"},[s("pre",[e._v(e._s(t.content))])])])})),0)]),s("el-footer",{staticStyle:{"margin-top":"20px"}},[s("el-row",[s("el-col",[s("el-input",{attrs:{placeholder:"Press Enter to send",disabled:e.sending},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}},model:{value:e.message.content,callback:function(t){e.$set(e.message,"content",t)},expression:"message.content"}})],1)],1)],1)],1)],1)],1)])])},a=[],o=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),i=s("2f62"),c=s("f8c8");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(s,!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={name:"Chat",data:function(){return{classes:["animated","fade-in","fast"],sending:!1,message:{to:"",content:""},school:{id:"",name:"",manager:{id:"",name:""},manager_id:""},messages:[]}},methods:{fetchSchool:function(){var e=this;c["a"].school.fetchSchool(this.profile.school_id).then((function(t){e.school=t.data,e.message.to=e.school.manager_id,e.fetchMessages()})).catch((function(t){e.$message.error({offset:95,message:t.message})}))},fetchMessages:function(){var e=this;c["a"].message.fetchMessages({to:this.school.manager_id}).then((function(t){e.messages=t.data,e.scrollToBottom()})).catch((function(t){e.$message.error({offset:95,message:t.message})}))},sendMessage:function(){var e=this;this.sending=!0,c["a"].message.sendMessage(this.message).then((function(t){e.sending=!1,e.message.content="",e.messages.push(t.data),e.scrollToBottom()})).catch((function(t){e.sending=!1,e.$message.error({offset:95,message:t.message})}))},scrollToBottom:function(){var e=this;this.$nextTick((function(){var t=e.$el.querySelector(".messages-container");t.scrollTo({top:t.scrollHeight,behavior:"smooth"})}))}},computed:l({},Object(i["b"])({profile:function(e){return e.account.profile},access_token:function(e){return e.account.access_token}})),mounted:function(){var e=this;window.Echo.private("message.".concat(this.profile.id)).listen(".MessageNotification",(function(t){e.messages.push(t.message),e.scrollToBottom()})),this.fetchSchool()}},g=f,d=(s("2f8f"),s("2877")),h=Object(d["a"])(g,n,a,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-a47b01d6.3ea34dde.js.map