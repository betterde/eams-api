(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3754"],{"01eb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-content"},[a("div",{staticClass:"panel"},[a("div",{staticClass:"panel-header",class:e.classes},[a("div",{staticClass:"panel-tools"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,span:6}},[a("el-input",{attrs:{placeholder:"Search teachers by typing here",clearable:""},on:{clear:e.handleClear},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchTeachers(t)}},model:{value:e.query.search,callback:function(t){e.$set(e.query,"search",t)},expression:"query.search"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-col",{attrs:{xs:12,span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:e.fetchTeachers}},[e._v("Search")])],1)],1)],1)]),a("div",{staticClass:"panel-body",class:e.classes},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.teachers,"empty-text":"No data"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"300"}}),a("el-table-column",{attrs:{prop:"name",label:"Name"}}),a("el-table-column",{attrs:{prop:"email",label:"Email"}}),a("el-table-column",{attrs:{prop:"option",label:"Actions",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.followed?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Unfollow",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-star-off",plain:"",circle:""},on:{click:function(a){return e.changeFollowStatus(t.row)}}})],1):a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Follow",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-star-on",plain:"",circle:""},on:{click:function(a){return e.changeFollowStatus(t.row)}}})],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:e.meta.layout,"page-size":e.query.size,total:e.meta.total,"pager-count":e.meta.pager_count,"page-sizes":e.meta.page_sizes,"current-page":e.query.current_page},on:{"update:currentPage":function(t){return e.$set(e.query,"current_page",t)},"update:current-page":function(t){return e.$set(e.query,"current_page",t)},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)])])},r=[],c=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),s=a("2f62"),o=a("f8c8");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach((function(t){Object(c["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"Teacher",data:function(){return{loading:!1,classes:["animated","fade-in","fast"],query:{size:10,search:"",follow:!0,school_id:"",current_page:1},meta:{total:0,pager_count:11,page_sizes:[10,20,50],layout:"sizes, total, prev, pager, next"},teachers:[]}},methods:{fetchTeachers:function(){var e=this;this.loading=!0,o["a"].teacher.fetchTeachers(this.query).then((function(t){e.teachers=t.data.map((function(e){return e.followed=0!==e.followers.length,e})),console.log(e.teachers),e.loading=!1})).catch((function(t){console.log(t),e.loading=!1,e.$message.error({offset:95,message:t.message})}))},handleClear:function(){this.fetchTeachers()},handleCurrentChange:function(e){this.query.page=e,this.fetchTeachers()},handleSizeChange:function(e){this.query.size=e,this.fetchTeachers()},changeFollowStatus:function(e){var t=this;o["a"].teacher.changeFollowStatus({teacher_id:e.id}).then((function(e){t.fetchTeachers()})).catch((function(e){t.$message.error({offset:95,message:e.message})}))}},computed:i({},Object(s["b"])({profile:function(e){return e.account.profile}})),mounted:function(){this.query.school_id=this.profile.school_id,this.fetchTeachers()}},p=u,h=a("2877"),f=Object(h["a"])(p,n,r,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0a3754.c1f62063.js.map